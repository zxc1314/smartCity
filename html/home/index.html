<!DOCTYPE html>
<html lang="cn">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>首页</title>
	<link rel="stylesheet" href="../../layui/css/layui.css">
	<link rel="stylesheet" href="../../css/base.css">
	<link rel="stylesheet" href="../../css/index.css">
</head>
<body>
	<div class="layui-fluid">
		<!-- header -->
		<div class="layui-row payContent">
			<div class="layui-col-xs4">
				<a href="javascript:;">
					<div class="img-txt">
						<img src="../../img/busCode.png" alt="">
						<h3>乘车码</h3>
					</div>
				</a>
			</div>
			<div class="layui-col-xs4">
				<a href="javascript:;">
					<div class="img-txt">
						<img src="../../img/recharge.png" alt="">
						<h3>充值</h3>
					</div>
				</a>
			</div>
			<div class="layui-col-xs4">
				<a href="javascript:;">
					<div class="img-txt">
						<img src="../../img/cardPackage.png" alt="">
						<h3>卡包</h3>
					</div>
				</a>
			</div>
		</div>
		<!-- end-header -->
		<!-- App -->
		<div class="layui-row appContent" id="appView"></div>
		<!-- end-App -->
		<!-- lastest news -->
		<div class="layui-row lastestNews">
			<h2 class="lastestNewsTitle">最新动态</h2>
			<div class="smartCityNotice" id="smartCityNoticeView"></div>
		</div>
		<!-- end-lastest news -->
	</div>
	<!-- footer -->
	<div class="layui-row footer">
		<div class="layui-col-xs4">
			<a href="javascript:;">
				<div class="img-txt">
					<img src="../../img/logo.jpg" alt="">
					<h3>首页</h3>
				</div>
			</a>
		</div>
		<div class="layui-col-xs4">
			<a href="javascript:;">
				<div class="img-txt">
					<img src="../../img/logo.jpg" alt="">
					<h3>消息</h3>
				</div>
			</a>
		</div>
		<div class="layui-col-xs4">
			<a href="javascript:;">
				<div class="img-txt">
					<img src="../../img/logo.jpg" alt="">
					<h3>我的</h3>
				</div>
			</a>
		</div>
	</div>
	<!-- end-footer -->
	<!-- 应用模板引擎 -->
	<script id="appTemplate" type="text/html">
		{{#  layui.each(d.appList, function(index, item){ }}
		<div class="layui-col-xs3">
			<a href="javascript:;">
				<div class="img-txt">
					<img src="{{ item.appLogo }}" alt="">
					<h3>{{ item.appName }}</h3>
				</div>
			</a>
		</div>
		{{#  }); }}
  	{{#  if(d.appList.length === 0){ }}
  		<div class="layui-col-xs3">
				<a href="javascript:;">
					<div class="img-txt">
						<img src="../../img/logo.jpg" alt="">
						<h3>公交</h3>
					</div>
				</a>
			</div>
			<div class="layui-col-xs3">
				<a href="javascript:;">
					<div class="img-txt">
						<img src="../../img/logo.jpg" alt="">
						<h3>学校</h3>
					</div>
				</a>
			</div>
			<div class="layui-col-xs3">
				<a href="javascript:;">
					<div class="img-txt">
						<img src="../../img/logo.jpg" alt="">
						<h3>企业</h3>
					</div>
				</a>
			</div>
			<div class="layui-col-xs3">
				<a href="javascript:;">
					<div class="img-txt">
						<img src="../../img/logo.jpg" alt="">
						<h3>社区</h3>
					</div>
				</a>
			</div>
			<div class="layui-col-xs3">
				<a href="javascript:;">
					<div class="img-txt">
						<img src="../../img/logo.jpg" alt="">
						<h3>医疗</h3>
					</div>
				</a>
			</div>
			<div class="layui-col-xs3">
				<a href="javascript:;">
					<div class="img-txt">
						<img src="../../img/logo.jpg" alt="">
						<h3>综合缴费</h3>
					</div>
				</a>
			</div>
	    <div class="layui-col-xs3">
				<a href="javascript:;">
					<div class="img-txt">
						<img src="../../img/logo.jpg" alt="">
						<h3>更多</h3>
					</div>
				</a>
			</div>
  	{{#  } }}
	</script>
	<!-- end-应用模板引擎 -->
	<!-- 智慧城市消息通知模板引擎 -->
	<script id="lastestNewsTemplate"  type="text/html">
		{{#  layui.each(d.lastestNewsList, function(index, item){ }}
			{{# if( item.dataType === 0 ){ }}
				<div class="noticeTitleBox">
					<div class="layui-col-xs1">
						<img class="imgNotice" src="{{ item.imgNotice }}" alt="">
					</div>
					<div class="layui-col-xs10 noticeTitle">
						<p>{{ item.noticeApp }}</p>
						<small>有新通知</small>
					</div>
				</div>
				<div class="layui-row">
					<div class="layui-col-xs8 noticeTxt">
						<a href="javascript:;">
							<h2 class="newsTitle">{{ item.noticeTitle }}</h2>
						</a>
						<div class="time">
							<i class="layui-icon grayBox-icon"></i><small>{{ item.noticeTime }}分钟前</small>
						</div>
					</div>
					<div class="layui-col-xs4">
						<img class="" src="{{ item.noticeCover }}" alt="" width="100%">
					</div>
				</div>
			{{# } }}
			{{# if( item.dataType === 1 ){ }}
				<div class="noticeTitleBox">
					<div class="layui-col-xs1">
						<img class="imgNotice" src="{{ item.imgNotice }}" alt="">
					</div>
					<div class="layui-col-xs10 noticeTitle">
						<p>{{ item.noticeApp }}</p>
						<small>有新的支付消息</small>
					</div>
				</div>
				<div class="layui-row noticeTxt">
					<a href="javascript:;">
						<h2>消息通知</h2>
						<p class="rechargeMsg">{{ item.rechargeMsg }}</p>
					</a>
					<div class="time">
						<i class="layui-icon grayBox-icon"></i><small>{{ item.noticeTime }}分钟前</small>
					</div>
				</div>
			{{# } }}
		{{#  }); }}
	</script>
	<!-- end-智慧城市消息通知模板引擎 -->
	<script src="../../js/jquery-3.3.1.min.js"></script>
	<script src="../../layui/layui.js"></script>
	<script>
		layui.use('laytpl', function(){
		  var laytpl = layui.laytpl;
		  
		  // 应用模板引擎
		  var appData = { //数据
			  "title":"应用模板引擎"
			  ,"appList":[
				  {
				  	"appLogo":"../../img/logo.jpg",
					  "appName":"公交"
					},
					{
						"appLogo":"../../img/logo.jpg",
						"appName":"学校"
					},
					{
						"appLogo":"../../img/logo.jpg",
						"appName":"企业"
					},
					{
						"appLogo":"../../img/logo.jpg",
						"appName":"社区"
					},
					{
						"appLogo":"../../img/logo.jpg",
						"appName":"医疗"
					},
					{
						"appLogo":"../../img/logo.jpg",
						"appName":"综合缴费"
					},
					{
						"appLogo":"../../img/logo.jpg",
						"appName":"更多"
					}
			  ]
			}
			// $.ajax({
			// 	url: '/getAppData',
			// 	type: 'post',
			// 	data: {
			// 	},
			// 	dataType: 'json',
			// 	success: function (data) {
			// 		console.log(data);
					var getAppTpl = appTemplate.innerHTML,
							appView = document.getElementById('appView');
					laytpl(getAppTpl).render(appData, function(html){
					  appView.innerHTML = html;
					});
			// 	}
			// });
			

			// 最新动态模板引擎
			var lastestNewsData = {
				"lastestNewsList" : [
					{
						"dataType" : 0,
						"imgNotice" : "../../img/logo.jpg",
						"noticeApp" : "广西农信智慧城市",
						"noticeTitle" : "新用户首次绑定农信卡奖励红包已发送至您的账户的账户绑定农信卡",
						"noticeTime" : "3",
						"noticeCover" : "../../img/logo.jpg"
					},
					{
						"dataType" : 1,
						"imgNotice" : "../../img/logo.jpg",
						"noticeApp" : "公交充值中心",
						"rechargeMsg" : "赵**女士，您好，您卡号为23423548275819277584的公交卡于2019-01-01充值100元成功成功成功。",
						"noticeTime" : "5",
					},
				],
			}
			// $.ajax({
			// 	url: '/getAppData',
			// 	type: 'post',
			// 	data: {
			// 	},
			// 	dataType: 'json',
			// 	success: function (data) {
					var getlastNewsTpl = lastestNewsTemplate.innerHTML,
							smartCityNoticeView = document.getElementById('smartCityNoticeView');
					laytpl(getlastNewsTpl).render(lastestNewsData, function(html){
					  smartCityNoticeView.innerHTML = html;
					});
			// 	}
			// });
		}); 

	</script>
</body>
</html>