<!DOCTYPE html>
<html lang="cn">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>
            城市云卡-按日查询
        </title>
        <link rel="stylesheet" href="../../layui/css/layui.css">
        <link rel="stylesheet" href="../../css/base.css">
        <link rel="stylesheet" href="../../css/transitIndex.css">
    </head>
    <body>
        <div class="layui-fluid">
            <!-- 顶部返回与标题 -->
            <div class="layui-row transitContent">
                <h2 class="transitTitle">
                    <a href="javascript:history.back(-1);" class="back">
                        <i class="layui-icon layui-icon-left">
                        </i>
                        返回
                    </a>
                    选择时间
                    <a href="javascript:;" class="timeTrue">
                        完成
                    </a>
                </h2>
            </div>
            <!-- 顶部返回与标题end -->
            <!-- 按月选择/近7天/近1个月/近三个月 -->
            <div class="layui-row seachTimeBtn" >
                <div class="layui-col-xs4">
                    <button class="layui-btn layui-btn-primary month">按月选择<img src="../../img/zhuanhuan.png" class="zhuanhuan"></button>
                </div>
                <div class="layui-col-xs2">
                    <button class="layui-btn layui-btn-primary week">近7天</button>
                </div>
                <div class="layui-col-xs2">
                    <button class="layui-btn layui-btn-primary oneMonth">近1个月</button>
                </div>
                <div class="layui-col-xs2">
                    <button class="layui-btn layui-btn-primary threeMonth">近3个月</button>
                </div>
            </div>
            <!-- 按月选择/近7天/近1个月/近三个月end -->
            <!-- 日期框与日期滚动模块 -->
            <div class="layui-row timeBox" >
                <div class="layui-col-xs12">
                    <input type="text" placeholder="请选择时间" autocomplete="off" class="layui-input seachTime" readonly="readonly">
                </div>
            </div>
            <!-- 日期狂与日期滚动模块end -->
        </div>
    </body>
    <script src="../../js/jquery-3.3.1.min.js"></script>
    <script src="../../layui/layui.js"></script>
    <script src="../../js/jquery.selector-px.js"></script>
    <script id="seachContent" type="text/html">
        {{#layui.each(d.value,function(index, item) {}}
        <div class="layui-row seachContentBox">
            <div class="layui-col-xs9">
                <p class="detailsType">{{ item.detailsType }}</p>
                <p class="detailsTime">{{ item.detailsTime }}</p>
                <p class="detailsNum">订单编号: <span>{{ item.detailsNum }}</span></p>
            </div>
            <div class="layui-col-xs3">
                <p class="detailsMoney">{{ item.detailsMoney }}</p>
                {{# if(item.detailsStatus == '已领款'){ }}
                    <p class="detailsStatus" style="color: #4889EF;">{{ item.detailsStatus }}</p>
                {{# }else{ }}
                    <p class="detailsStatus">{{ item.detailsStatus }}</p>
                {{# } }}
            </div>
        </div>
        {{# }); }}
    </script>
    <script>
        function fun_date(time){
            var date1 = new Date(),
            time1=date1.getFullYear()+"-"+(date1.getMonth()+1)+"-"+date1.getDate();//time1表示当前时间
            var date2 = new Date(date1);
            date2.setDate(date1.getDate()+time);
            var time2 = date2.getFullYear()+"-"+(date2.getMonth()+1)+"-"+date2.getDate();
            if (!time) {
                return time1;
            } else {
                return time2;
            }
        }
        console.log(fun_date());//7天后的日期
        console.log(fun_date(-7));//7天前的日期
        layui.use(['form', 'layer', 'element', 'laytpl'],function() {
            var form = layui.form,
            layer = layui.layer,
            element = layui.element,
            laytpl = layui.laytpl;
            
            //获取当前年份与时间段区间
            var date=new Date;
            var endYear=date.getFullYear(),startYear=endYear-100;
            var gYear = [];
            for (var i = 0; i < 100; i++) {
                gYear.push(Number(endYear) - i);
            };
            // 月 范围：十二个月份
            var tweMonth = ['01','02','03','04','05','06','07','08','09','10','11','12'];
            // 年月
            $.scrEvent2({
                data: gYear,
                data2: tweMonth,
                evEle: '.seachTime',
                title: '选择时间',
                defValue: 6,
                defValue2: 0,
                eleName: '年',
                eleName2: '月',
                afterAction: function (data1, data2) {
                  $('.seachTime').val(data1 + '年' + data2 + '月');
                }
            })

            /*$.dateSelector({
                evEle: '.seachTime',
                startYear: startYear,
                endYear: endYear,
                timeBoo: false,
                afterAction: function (d1, d2, d3) {
                    $('.seachTime').val(d1 + '-' + d2 + '-' + d3);
                }
            });*/

            //近七天按钮
            $("button.week").on("click",function(){
                //$('.seachTime').val(fun_date(-7)+' 至 '+fun_date());
                layer.alert(fun_date(-7)+' 至 '+fun_date());
            });
            //近一个月按钮
            $("button.oneMonth").on("click",function(){
                //$('.seachTime').val(fun_date(-30)+' 至 '+fun_date());
                layer.alert(fun_date(-30)+' 至 '+fun_date());
            });
            //近三个月按钮
            $("button.threeMonth").on("click",function(){
                //$('.seachTime').val(fun_date(-90)+' 至 '+fun_date());
                layer.alert(fun_date(-90)+' 至 '+fun_date());
            });
        });
    </script>

</html>